name: Run YT2m Workflow

on:
  push:  # ä»£ç¢¼æ¨é€æ™‚è§¸ç™¼
  schedule:  
    - cron: '0 */3 * * *'  # æ¯ 3 å°æ™‚é‹è¡Œä¸€æ¬¡
  workflow_dispatch:  # æ‰‹å‹•è§¸ç™¼

jobs:
  run-script:
    runs-on: ubuntu-latest  # ä½¿ç”¨æœ€æ–°çš„ Ubuntu é‹è¡Œå™¨

    steps:
      - name: ğŸ›ï¸ æª¢å‡ºå€‰åº«
        uses: actions/checkout@v3  # æ‹‰å–æœ€æ–°ä»£ç¢¼

      - name: ğŸ“‚ é¡¯ç¤ºå€‰åº«æ–‡ä»¶çµæ§‹
        run: ls -R  # ç¢ºä¿æª”æ¡ˆå®Œæ•´

      - name: âœ… è¨­ç½® go.sh å¯åŸ·è¡Œ
        run: chmod +x go.sh

      - name: ğŸŒ é¡¯ç¤ºç’°å¢ƒä¿¡æ¯
        run: uname -a

      - name: ğŸ’¾ å®‰è£ä¾è³´é …
        run: sudo apt-get update && sudo apt-get install -y <ä¾è³´é …åç¨±>  # æ›¿æ›ç‚ºå¯¦éš›ä¾è³´é …åç¨±

      - name: ğŸš€ é‹è¡Œ go.sh ä¸¦é¡¯ç¤ºè©³ç´°è¼¸å‡º
        run: |
          set -e
          ./go.sh
        continue-on-error: true

      - name: ğŸ“‚ é¡¯ç¤º output ç›®éŒ„å…§å®¹
        run: ls -lh output/

      - name: ğŸ”„ æäº¤ä¸¦æ¨é€è®Šæ›´
        run: |
          git config --global user.name "your-username"
          git config --global user.email "your-email@example.com"
          git add output/
          git commit -m "è‡ªå‹•ç”Ÿæˆçš„æ–‡ä»¶"
          git push origin main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
